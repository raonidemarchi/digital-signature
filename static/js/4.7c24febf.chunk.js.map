{"version":3,"sources":["components/DocumentDetails/DocumentDetails.module.scss","icons/signature-solid.svg","icons/paper-plane-solid.svg","icons/undo-solid.svg","pdf/example.pdf","components/DocumentDetails/DocumentDetails.js","../node_modules/pdfjs-dist/build sync"],"names":["module","exports","container","header","documentContainerWrapper","documentContainer","signaturePage","highlight","highlights","signatureArea","signerDetails","signatureRow","fabGoSignature","fabSend","fabClear","buttonIcon","__webpack_require__","p","pdfjs","GlobalWorkerOptions","workerSrc","concat","version","DocumentDetails","_useState","useState","_useState2","Object","C_Users_raoni_Documents_GitHub_digital_signature_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","pagesCount","setPagesCount","_useState3","_useState4","signed","setSigned","signaturePad","document","title","window","onresize","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","styles","react_pdf__WEBPACK_IMPORTED_MODULE_2__","file","pdf","onLoadSuccess","_ref","numPages","Array","fill","map","value","index","key","pageNumber","renderTextLayer","ref","react_signature_canvas__WEBPACK_IMPORTED_MODULE_3___default","penColor","canvasProps","onEnd","isEmpty","onClick","clear","role","src","undoIcon","alt","fetch","method","body","JSON","stringify","html","getTrimmedCanvas","toDataURL","filename","then","res","json","result","open","url","error","paperPlane","scrollTo","scrollHeight","classList","remove","setTimeout","signatureIcon","webpackEmptyContext","req","e","Error","code","keys","resolve","id"],"mappings":"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","file":"static/js/4.7c24febf.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DocumentDetails_container__3f-5d\",\"header\":\"DocumentDetails_header__G3Iks\",\"documentContainerWrapper\":\"DocumentDetails_documentContainerWrapper__2Pmtv\",\"documentContainer\":\"DocumentDetails_documentContainer__2K1eP\",\"signaturePage\":\"DocumentDetails_signaturePage__3rbaO\",\"highlight\":\"DocumentDetails_highlight__3DxWx\",\"highlights\":\"DocumentDetails_highlights__3-dTC\",\"signatureArea\":\"DocumentDetails_signatureArea__36MZ2\",\"signerDetails\":\"DocumentDetails_signerDetails__1RHQ2\",\"signatureRow\":\"DocumentDetails_signatureRow__cdr8r\",\"fabGoSignature\":\"DocumentDetails_fabGoSignature__37AOH\",\"fabSend\":\"DocumentDetails_fabSend__3qnEJ\",\"fabClear\":\"DocumentDetails_fabClear__5oKKC\",\"buttonIcon\":\"DocumentDetails_buttonIcon__164gz\"};","module.exports = __webpack_public_path__ + \"static/media/signature-solid.1982a90e.svg\";","module.exports = __webpack_public_path__ + \"static/media/paper-plane-solid.ccd021e3.svg\";","module.exports = __webpack_public_path__ + \"static/media/undo-solid.6ffe1340.svg\";","module.exports = __webpack_public_path__ + \"static/media/example.ab51e890.pdf\";","import React, { useState } from 'react';\r\nimport { pdfjs, Document, Page } from 'react-pdf';\r\nimport SignatureCanvas from 'react-signature-canvas';\r\n\r\nimport styles from './DocumentDetails.module.scss';\r\nimport './pdf-viewer.scss';\r\n\r\nimport signatureIcon from '../../icons/signature-solid.svg';\r\nimport paperPlane from '../../icons/paper-plane-solid.svg';\r\nimport undoIcon from '../../icons/undo-solid.svg';\r\nimport pdf from '../../pdf/example.pdf';\r\n\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nfunction DocumentDetails() {\r\n  const [pagesCount, setPagesCount] = useState(0);\r\n  const [signed, setSigned] = useState(false);\r\n  const documentTitle = 'Contrato de trabalho';\r\n  let signaturePad = {};\r\n  let signaturePage = {};\r\n\r\n  document.title = documentTitle;\r\n\r\n  window.onresize = function() {\r\n    if (signed) {\r\n      setSigned(false);\r\n    }\r\n  }\r\n\r\n  const onDocumentLoadSuccess = ({ numPages }) => {\r\n    setPagesCount(numPages);\r\n  }\r\n\r\n  const goToSignatureArea = () => {\r\n    window.scrollTo(0, document.body.scrollHeight);\r\n    \r\n    signaturePage.classList.remove(styles.highlight);\r\n\r\n    // highlights signature area\r\n    setTimeout(() => {\r\n      signaturePage.className += ' ' + styles.highlight;\r\n    }, 200)\r\n  }\r\n\r\n  const changeButtonToSend = () => {\r\n    setSigned(!signaturePad.isEmpty());\r\n  }\r\n\r\n  const clearSignaturePad = () => {\r\n    signaturePad.clear();\r\n    setSigned(false);\r\n  }\r\n\r\n  const sendSignedDocument = () => {\r\n    fetch('https://pdfgen.catini.org', {\r\n        method: 'post',\r\n        body: JSON.stringify({\r\n          html: `<img src=\"${signaturePad.getTrimmedCanvas().toDataURL('image/png')}\" width=\"400\" />`,\r\n          filename: 'Raoni'\r\n        })\r\n      })\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => { window.open(result.url) },\r\n        (error) => {  }\r\n      )\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        {documentTitle} - {pagesCount} p√°ginas\r\n      </div>\r\n    \r\n      <div className={styles.documentContainerWrapper}>\r\n        <div className={styles.documentContainer}>\r\n          <Document file={pdf} onLoadSuccess={onDocumentLoadSuccess}>\r\n            {Array(pagesCount).fill().map(\r\n              (value, index) => <Page key={index} pageNumber={index + 1} renderTextLayer={false} />\r\n            )}\r\n          </Document>\r\n\r\n          <div className={styles.signaturePage} ref={ref => { signaturePage = ref }}>\r\n            <SignatureCanvas\r\n              penColor=\"black\"\r\n              canvasProps={{ className: styles.signatureArea }}\r\n              ref={ref => { signaturePad = ref }}\r\n              onEnd={changeButtonToSend}\r\n            />\r\n\r\n            <div className={styles.signerDetails}>\r\n              <hr className={styles.signatureRow} />\r\n              <p>\r\n                <b>Alberto da Silva</b>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      { \r\n        signed ?\r\n          <div>\r\n            <div className={styles.fabClear} title=\"Apagar assinatura\" onClick={clearSignaturePad} role=\"button\">\r\n              <img className={styles.buttonIcon} src={undoIcon} alt=\"undo icon\" />\r\n            </div>\r\n\r\n            <div className={styles.fabSend} title=\"Enviar proposta assinada\" onClick={sendSignedDocument} role=\"button\">\r\n              <img className={styles.buttonIcon} src={paperPlane} alt=\"Paper plane icon\" /> Enviar\r\n            </div>\r\n          </div>\r\n        :\r\n          <div className={styles.fabGoSignature} title=\"Ir para assinatura\" onClick={goToSignatureArea} role=\"button\">\r\n            <img className={styles.buttonIcon} src={signatureIcon} alt=\"Signature icon\" /> Ir para assinatura\r\n          </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DocumentDetails;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 46;"],"sourceRoot":""}